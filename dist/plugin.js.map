{"version":3,"file":"plugin.js","sources":["esm/definitions.js","esm/index.js","esm/web.js"],"sourcesContent":["export var MParticleEventType;\n(function (MParticleEventType) {\n    MParticleEventType[MParticleEventType[\"Navigation\"] = 1] = \"Navigation\";\n    MParticleEventType[MParticleEventType[\"Location\"] = 2] = \"Location\";\n    MParticleEventType[MParticleEventType[\"Search\"] = 3] = \"Search\";\n    MParticleEventType[MParticleEventType[\"Transaction\"] = 4] = \"Transaction\";\n    MParticleEventType[MParticleEventType[\"UserContent\"] = 5] = \"UserContent\";\n    MParticleEventType[MParticleEventType[\"UserPreference\"] = 6] = \"UserPreference\";\n    MParticleEventType[MParticleEventType[\"Social\"] = 7] = \"Social\";\n    MParticleEventType[MParticleEventType[\"Other\"] = 8] = \"Other\";\n})(MParticleEventType || (MParticleEventType = {}));\nexport var MParticleProductActionType;\n(function (MParticleProductActionType) {\n    MParticleProductActionType[MParticleProductActionType[\"Unknown\"] = 0] = \"Unknown\";\n    MParticleProductActionType[MParticleProductActionType[\"AddToCart\"] = 1] = \"AddToCart\";\n    MParticleProductActionType[MParticleProductActionType[\"RemoveFromCart\"] = 2] = \"RemoveFromCart\";\n    MParticleProductActionType[MParticleProductActionType[\"Checkout\"] = 3] = \"Checkout\";\n    MParticleProductActionType[MParticleProductActionType[\"CheckoutOption\"] = 4] = \"CheckoutOption\";\n    MParticleProductActionType[MParticleProductActionType[\"Click\"] = 5] = \"Click\";\n    MParticleProductActionType[MParticleProductActionType[\"ViewDetail\"] = 6] = \"ViewDetail\";\n    MParticleProductActionType[MParticleProductActionType[\"Purchase\"] = 7] = \"Purchase\";\n    MParticleProductActionType[MParticleProductActionType[\"Refund\"] = 8] = \"Refund\";\n    MParticleProductActionType[MParticleProductActionType[\"AddToWishlist\"] = 9] = \"AddToWishlist\";\n    MParticleProductActionType[MParticleProductActionType[\"RemoveFromWishlist\"] = 10] = \"RemoveFromWishlist\";\n})(MParticleProductActionType || (MParticleProductActionType = {}));\n//# sourceMappingURL=definitions.js.map","import { registerPlugin } from '@capacitor/core';\nconst MParticleCapacitor = registerPlugin('MParticleCapacitor', {\n    web: () => import('./web').then(m => new m.MParticleCapacitorWeb()),\n});\nexport * from './definitions';\nexport { MParticleCapacitor };\n//# sourceMappingURL=index.js.map","import { WebPlugin } from '@capacitor/core';\nimport mParticle from '@mparticle/web-sdk';\n// eslint-disable-next-line @typescript-eslint/no-var-requires\nexport class MParticleCapacitorWeb extends WebPlugin {\n    async mParticleConfig(call) {\n        var mParticleConfig = {\n            isDevelopmentMode: call.isDevelopmentMode,\n            dataPlan: {\n                planId: call.planID || 'master_data_plan',\n                planVersion: call.planVer || 2\n            },\n            identifyRequest: call.identifyRequest || undefined,\n            logLevel: (call.logLevel == \"verbose\" || \"warning\" || \"none\") ? call.logLevel : \"verbose\",\n            identityCallback: call.identityCallback || undefined,\n        };\n        return mParticleConfig;\n    }\n    async mParticleInit(call) {\n        return mParticle.init(call.key, call.mParticleConfig);\n    }\n    async loginMParticleUser(call) {\n        return mParticle.Identity.login(this.identityRequest(call.email, call.customerId));\n    }\n    async logoutMParticleUser(_call) {\n        const identityCallback = (result) => {\n            if (result.getUser()) {\n                console.log('logging out of mParticle', _call);\n            }\n        };\n        return mParticle.Identity.logout({}, identityCallback);\n    }\n    async registerMParticleUser(call) {\n        return mParticle.Identity.login(this.identityRequest(call.email, call.customerId), function (result) {\n            if (!result)\n                return;\n            const currentUser = result.getUser();\n            for (const [key, value] of Object.entries(call.userAttributes)) {\n                if (key && value)\n                    currentUser.setUserAttribute(key, value);\n            }\n        });\n    }\n    async logMParticleEvent(call) {\n        return mParticle.logEvent(call.eventName, call.eventType, call.eventProperties);\n    }\n    async logMParticlePageView(call) {\n        return mParticle.logPageView(call.pageName, { page: call.pageLink });\n    }\n    async getAllUserAttributes() {\n        return this.currentUser.getAllUserAttributes();\n    }\n    async setUserAttribute(call) {\n        var _a;\n        return (_a = this.currentUser) === null || _a === void 0 ? void 0 : _a.setUserAttribute(call.attributeName, call.attributeValue);\n    }\n    async setUserAttributeList(call) {\n        return this.currentUser.setUserAttributeList(call.attributeName, call.attributeValues);\n    }\n    async updateMParticleCart(call) {\n        const productToUpdate = this.createMParticleProduct(call.productData);\n        return this.logProductAction(call.eventType, productToUpdate, call.customAttributes, null, null);\n    }\n    async addMParticleProduct(call) {\n        const product = this.createMParticleProduct(call.productData);\n        return this.logProductAction(mParticle.ProductActionType.AddToCart, product, call.customAttributes, null, null);\n    }\n    async removeMParticleProduct(call) {\n        const productToRemove = this.createMParticleProduct(call.productData);\n        return this.logProductAction(mParticle.ProductActionType.RemoveFromCart, productToRemove, call.customAttributes, null, null);\n    }\n    async submitPurchaseEvent(call) {\n        const productArray = [];\n        (call.productData).forEach((element) => {\n            productArray.push(this.createMParticleProduct(element));\n        });\n        return this.logProductAction(mParticle.ProductActionType.Purchase, productArray, call.customAttributes, call.transactionAttributes, null);\n    }\n    get currentUser() {\n        return mParticle.Identity.getCurrentUser();\n    }\n    identityRequest(email, customerId) {\n        return {\n            userIdentities: {\n                email,\n                customerid: customerId\n            },\n        };\n    }\n    createMParticleProduct(productData) {\n        return mParticle.eCommerce.createProduct(productData.name, //productName\n        productData.sku, //productSku\n        productData.cost, //productPrice\n        productData.quantity, //quantity\n        undefined, // variant\n        undefined, // category\n        undefined, // brand\n        undefined, // position\n        undefined, // couponCode\n        productData.attributes);\n    }\n    logProductAction(eventType, product, customAttributes, transactionAttributes, customFlags) {\n        mParticle.eCommerce.logProductAction(eventType, product, // product created on mparticle\n        customAttributes, // mimData\n        customFlags, transactionAttributes);\n    }\n    async echo(options) {\n        return options;\n    }\n}\n//# sourceMappingURL=web.js.map"],"names":["MParticleEventType","MParticleProductActionType","registerPlugin","WebPlugin","mParticle"],"mappings":"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"}